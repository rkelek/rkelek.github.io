
<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>Portfolio</title>
	<script src="https://code.jquery.com/jquery-1.12.4.js"></script>
	<script src="https://code.jquery.com/ui/1.12.1/jquery-ui.js"></script>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/datepicker/1.0.10/datepicker.min.js" integrity="sha512-RCgrAvvoLpP7KVgTkTctrUdv7C6t7Un3p1iaoPr1++3pybCyCsCZZN7QEHMZTcJTmcJ7jzexTO+eFpHk4OCFAg==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/css3-animate-it/1.0.3/js/css3-animate-it.min.js" integrity="sha512-X04knNLL77jarDJ7uTIUXMBvZwMCWn2lmV9qPrfq7UrPPd3GP5a4IVbZBkRNI/vumMMMqOZqnNLq8Eb/Y6TU7A==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
	<link rel="stylesheet" href="//code.jquery.com/ui/1.12.1/themes/base/jquery-ui.css">
</head>
<style>
table,
th,
td {
border: 1px solid black;
border-collapse: collapse;
text-align: center;
padding: 10px;
}
</style>
<script>
	$( function() {
		$( "#datepicker" ).datepicker();
	} );
</script>
<script>
	$.datepicker.setDefaults({
		dateFormat: 'yy-mm-dd',
		prevText: '이전 달',
		nextText: '다음 달',
		monthNames: ['1월', '2월', '3월', '4월', '5월', '6월', '7월', '8월', '9월', '10월', '11월', '12월'],
		monthNamesShort: ['1월', '2월', '3월', '4월', '5월', '6월', '7월', '8월', '9월', '10월', '11월', '12월'],
		dayNames: ['일', '월', '화', '수', '목', '금', '토'],
		dayNamesShort: ['일', '월', '화', '수', '목', '금', '토'],
		dayNamesMin: ['일', '월', '화', '수', '목', '금', '토'],
		showMonthAfterYear: true,
		yearSuffix: '년'
	});

	$(function() {
		$("#datepicker").datepicker();
	});

</script>
<body>
	<p>시작일 : <input type="text" id="datepicker" value="2023-04-18" onchange="dateChange()"></p>
	<table>
		<thead>
			<tr>
				<th>날짜</th>
				<th>출근여부</th>          
			</tr>
		</thead>
		<tbody id="tbooyCheck">
		</tbody>
	</table>
</body>
	
<script>
Date.prototype.addDays = function (days) {
	var date = this;
	return new Date(date.setDate(date.getDate() + days));
};
	
var refDay = new Date('2023-04-18');
var workYn = "Y";
var dayCnt = 0;
var pText = '';
$('document').ready(function () {
	gridDays();
});

function gridDays(){
	for(var i = 0 ; i < 368; i++){
		pText += '<tr><td>'+toString(refDay)+'</td><td>'+(workYn == 'Y' ? "일하는날" : "쉬는날")+'</td></tr>'
		dayCnt++;
		refDay.addDays(1);
		if(dayCnt == 4){
			dayCnt = 0;
			workYn = workYn == 'Y' ? 'N' : 'Y';
		}
	}

	$('#tbooyCheck').html(pText)
}

function dateChange(){
	todayWorkYn($( "#datepicker" ).value());
}

function todayWorkYn(targetDay){
	Date.prototype.addDays = function (days) {
		var date = this;
		return new Date(date.setDate(date.getDate() + days));
	};
	var today = new Date(targetDay);


	if(today < refDay){
		for(var i = 0 ; i < 368; i++){
			if(today == refDay){
				gridDays();
				break;
			}

			refDay.addDays(-1);
			if(dayCnt == 0){
				dayCnt = 3;
				workYn = workYn == 'Y' ? 'N' : 'Y';
			}else{
				dayCnt--;
			}

		}
	}
}


	

function leftPad(value) {
	if (value >= 10) {
		return value;
	}

	return `0${value}`;
}

function toString(source, delimiter = '-') {
	const year = source.getFullYear();
	const month = leftPad(source.getMonth() + 1);
	const day = leftPad(source.getDate());

	return [year, month, day].join(delimiter);
}	
</script>
	
</html>
